import telebot
from telebot.types import InlineKeyboardMarkup, InlineKeyboardButton

TOKEN = "7935033084:AAHphmEyQFMmRXPrPC5vC0kjA_E2XPq2s3o"
bot = telebot.TeleBot(TOKEN)

PAYMENT_LINK = (
    "https://checkout.paygate.to/process-payment.php?"
    "address=uTuEcf3KjCh%2FBgTu3dEy9PXYtchgyer01u1aOOqBwqzAmKxF036iBkkBxTZ%2BtsRamReAdEXG%2BLM9yOzH1hdVnA%3D%3D"
    "&amount=35&provider=mercuryo&email=markfish100%40outlook.com&currency=USD"
)

WALLET_ADDRESSES = {
    'btc': "1JBfmrjKbtHyqVtxC11w9GPgQJcfUJTeH8",
    'usdt_trc': "TS88vt8uENtbWifnr8W1o9gdPJxwGomrud",
    'usdt_bep': "0x197C2575974E2E8CAc60Eca1643BC7eaE97D5C0e",
    'usdt_matic': "0x197C2575974E2E8CAc60Eca1643BC7eaE97D5C0e",
    'xmr': "48YNhAmbSaWBjKTxgRynGPFwcES3FrsBmTeLHHAew4yMWYFdBkYNjqk3U3XME5MwFRBzasuEDiroAH659LzGeYZqCjmHSn9"
}

CRYPTO_OPTIONS = {
    'btc': "â‚¿ Bitcoin (BTC)",
    'usdt_trc': "ğŸ’ USDT (TRC-20)",
    'usdt_bep': "ğŸ’ USDT (BEP-20)",
    'usdt_matic': "ğŸ’ USDT (Polygon)",
    'xmr': "ğŸ˜ Monero (XMR)"
}

PROMO_TEXT = (
    "*ğŸ” Join to PRIVATE VIP CHANNEL ğŸ’*\n\n"
    "*1ï¸âƒ£ Full Archive of deleted channel content (more than 1TB+ Content) ğŸ‘…*\n\n"
    "*2ï¸âƒ£ Full Uncensored Videos & Pics of Hottest ASMR Girl (Onlyfans & Patreon Archive) ğŸ”*\n\n"
    "*3ï¸âƒ£ Constantly updated with new content almost every day ğŸ”¥*\n\n"
    "*4ï¸âƒ£ Download with no limits available for all content âœ…*\n\n"
    "_The value of all this content is over $10,000 ğŸ’µ. But you can get them for only $35 ğŸ˜_\n\n"
    "*One-Time Payment / Lifetime Access ğŸ’«*\n\n"
    "*Price = $ 35 ğŸ’µUSD*\n\n"
    "*____________________________________*"
)

FOLLOWUP_TEXT = (
    "*ğŸ’³ Payment Details* ğŸ’³\n\n"
    "ğŸ’¸ Amount: $35 USD \n"
    "â±ï¸ Processing Time: ~1-5 minutes\n\n"
    "*âœ… When you have paid click â€œI PAIDâ€ and send the screenshot or photo of payment to this chat.*\n\n"
    "ğŸ”°_Need Support? dm â¡ï¸ @paulcodio1_"
)

ADMIN_ID = 5555098293
PRIVATE_CHANNEL_ID = -1002293298397

@bot.message_handler(commands=['start'])
def send_start(message):
    with open("q04x_5nw.jpg", "rb") as photo:
        bot.send_photo(message.chat.id, photo)
    markup = InlineKeyboardMarkup()
    markup.add(InlineKeyboardButton("ğŸš€ JOIN", callback_data="join_now"))
    bot.send_message(message.chat.id, "Welcome! Click JOIN to see the offer.", reply_markup=markup)

@bot.callback_query_handler(func=lambda call: call.data == "join_now")
def handle_join(call):
    markup = InlineKeyboardMarkup(row_width=1)
    markup.add(
        InlineKeyboardButton("ğŸ’³ Credit Card", callback_data="pay_card"),
        InlineKeyboardButton("ğŸ’¸ Apple Pay, Google Pay etc.", callback_data="pay_paypal"),
        InlineKeyboardButton("ğŸ…¿ï¸ PayPal", callback_data="pay_cashapp"),
        InlineKeyboardButton("ğŸª™ Telegram Wallet", callback_data="pay_tgwallet"),
        InlineKeyboardButton("â‚¿ Crypto", callback_data="pay_crypto"),
        InlineKeyboardButton("ğŸ”™ Back", callback_data="back_to_start")
    )
    bot.edit_message_text(
        chat_id=call.message.chat.id,
        message_id=call.message.message_id,
        text=PROMO_TEXT,
        reply_markup=markup,
        parse_mode="Markdown"
    )

@bot.callback_query_handler(func=lambda call: call.data == "back_to_start")
def back_to_start(call):
    markup = InlineKeyboardMarkup()
    markup.add(InlineKeyboardButton("ğŸš€ JOIN", callback_data="join_now"))
    bot.edit_message_text(
        chat_id=call.message.chat.id,
        message_id=call.message.message_id,
        text="*Welcome! Click JOIN to see the offer.*",
        reply_markup=markup
    )

@bot.callback_query_handler(func=lambda call: call.data in ["pay_card", "pay_paypal"])
def handle_payment(call):
    markup = InlineKeyboardMarkup(row_width=1)
    markup.add(
        InlineKeyboardButton("ğŸ‘‰ Click here to pay", url=PAYMENT_LINK),
        InlineKeyboardButton("âœ… I PAID", callback_data="i_paid"),
        InlineKeyboardButton("ğŸ”™ Back", callback_data="join_now")
    )
    bot.edit_message_text(
        chat_id=call.message.chat.id,
        message_id=call.message.message_id,
        text=FOLLOWUP_TEXT,
        reply_markup=markup,
        parse_mode="Markdown"
    )

@bot.callback_query_handler(func=lambda call: call.data == "pay_cashapp")
def handle_cashapp(call):
    text = (
        "*ğŸ…¿ï¸ How to pay with PAYPAL or CASHAPP?*\n\n"
        "*Open the site or app and select buy crypto. Select Bitcoin and put $35 as the amount. Once purchased go to the send item, select the amount (equivalent of $35), and paste the address I wrote below. Next do on send to pay*\n\n"
        "*ğŸ‘‡BTC Address:ğŸ‘‡*\n"
        "`1JBfmrjKbtHyqVtxC11w9GPgQJcfUJTeH8`\n\n"
        "*âœ… When you have paid click â€œI PAIDâ€ and send the screenshot or photo of payment to this chat.*"
    )
    markup = InlineKeyboardMarkup(row_width=1)
    markup.add(
        InlineKeyboardButton("âœ… I PAID", callback_data="i_paid"),
        InlineKeyboardButton("ğŸ”™ Back", callback_data="join_now")
    )
    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id, text=text, reply_markup=markup, parse_mode="Markdown")

@bot.callback_query_handler(func=lambda call: call.data == "pay_tgwallet")
def handle_telegram_wallet(call):
    text = (
        "*ğŸª™ How to pay with TELEGRAM WALLET ?*\n\n"
        "*Open the @WALLET bot and purchase USDT ($35) with your card. Next send your USDT ($35) to the address given below.*\n\n"
        "*ğŸ‘‡USDT (TRC20) AddressğŸ‘‡*\n"
        "`TS88vt8uENtbWifnr8W1o9gdPJxwGomrud`\n\n"
        "*âœ… When you have paid click â€œI PAIDâ€ and send the screenshot or photo of payment to this chat.*"
    )
    markup = InlineKeyboardMarkup(row_width=1)
    markup.add(
        InlineKeyboardButton("âœ… I PAID", callback_data="i_paid"),
        InlineKeyboardButton("ğŸ”™ Back", callback_data="join_now")
    )
    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id, text=text, reply_markup=markup, parse_mode="Markdown")

@bot.callback_query_handler(func=lambda call: call.data == "pay_crypto")
def choose_crypto(call):
    markup = InlineKeyboardMarkup(row_width=1)
    for key, label in CRYPTO_OPTIONS.items():
        markup.add(InlineKeyboardButton(label, callback_data=f"crypto_{key}"))
    markup.add(InlineKeyboardButton("ğŸ”™ Back", callback_data="join_now"))
    bot.edit_message_text(
        chat_id=call.message.chat.id,
        message_id=call.message.message_id,
        text="ğŸ”® Select your prefer cryptocurrency:",
        reply_markup=markup
    )

@bot.callback_query_handler(func=lambda call: call.data.startswith("crypto_"))
def handle_crypto(call):
    crypto_type = call.data.split("_", 1)[1]
    if crypto_type not in CRYPTO_OPTIONS:
        bot.answer_callback_query(call.id, "Invalid selection.")
        return

    details = (
        f"*ğŸ’³ {CRYPTO_OPTIONS[crypto_type]} Payment Details* ğŸ’³\n\n"
        f"*ğŸ“ Wallet Address*:\n`{WALLET_ADDRESSES[crypto_type]}`\n\n"
        "ğŸ’¸ Amount: $35 USD equivalent\n"
        "â±ï¸ Processing Time: ~1-5 minutes\n\n"
        "*When you have paid click â€œI PAIDâ€ and send the screenshot or photo of payment to this chat.*\n\n"
        "ğŸ”°_Need Support? dm â¡ï¸ @paulcodio1_"
    )

    markup = InlineKeyboardMarkup(row_width=1)
    markup.add(
        InlineKeyboardButton("âœ… I PAID", callback_data="i_paid"),
        InlineKeyboardButton("ğŸ”™ Back to Crypto", callback_data="pay_crypto")
    )
    bot.send_message(call.message.chat.id, details, reply_markup=markup, parse_mode="Markdown")
    bot.delete_message(call.message.chat.id, call.message.message_id)

@bot.callback_query_handler(func=lambda call: call.data == "i_paid")
def confirm_paid(call):
    bot.send_message(
        call.message.chat.id,
        "*ğŸ“¤ Please send the screenshot or photo of payment to this chat and you will be added*\n\n"
        "ğŸ”°_Need Support? dm â¡ï¸ @paulcodio1_",  
        parse_mode="Markdown"
    )

@bot.message_handler(content_types=['photo'])
def handle_payment_proof(message):
    caption = f"ğŸ“© New payment proof from @{message.from_user.username or message.from_user.first_name} (ID: {message.from_user.id})"
    markup = InlineKeyboardMarkup()
    markup.add(InlineKeyboardButton("âœ… Approve", callback_data=f"approve_{message.from_user.id}"))
    bot.forward_message(ADMIN_ID, message.chat.id, message.message_id)
    bot.send_message(ADMIN_ID, caption, reply_markup=markup)
    bot.send_message(
        message.chat.id,
        "*âœ… Image received. It will be processed and you will receive a response as soon as possible.*\n\n"
        "ğŸ”°_Need Support? dm â¡ï¸ @paulcodio1_",
        parse_mode="Markdown"
    )

@bot.callback_query_handler(func=lambda call: call.data.startswith("approve_"))
def approve_user(call):
    user_id = int(call.data.split("_")[1])
    try:
        invite = bot.create_chat_invite_link(chat_id=PRIVATE_CHANNEL_ID, member_limit=1, expire_date=None)
        bot.send_message(user_id, f"ğŸ‰ğŸ‰ğŸ‰ YOU HAVE BEEN APPROVED!\nTHIS IS YOUR LINK FOR JOIN ğŸ‰ğŸ‰ğŸ‰ :\n{invite.invite_link}")
        bot.answer_callback_query(call.id, "User approved and link sent.")
    except Exception as e:
        bot.answer_callback_query(call.id, f"Error: {str(e)}")

bot.polling()